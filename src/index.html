<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <h1>--</h1>
    <!-- ${} 插值 -->
    <div>Hello ${value}</div>
    <div attr="Hello ${value}">attr</div>

    <!-- .property 赋值 -->
    <div .value="value">.prop</div>
    <div [value]="value">[value]</div>
    <div class="a" .class="{a:value}">.class</div>
    <div style="background: #8882" .style="{width:value}">.style</div>
    <div ...="{prop1: 1, prop2: 2}">...</div>

    <!-- if 条件 -->
    <div if="(value.length==1)">if</div>
    <div else if="(value.length==2)">else if</div>
    <div else>else</div>

    <!-- for 循环 -->
    <div for="(const item of value)">
      for: <span for="(var key in value)">${value[key]}</span>
    </div>

    <!-- on 事件 -->
    <div onclick="console.log(this, event)">on</div>
    <div .onclick="console.count">.on</div>

    <!-- .property + on 双向绑定 -->
    <input
      .value="value"
      oninput="if(!(event.isComposing&&/[a-z]/i.test(event.data))) value=Number(this.value)||this.value"
      xxxoncompositionend="console.error(event)"
      autofocus
    />
    ${typeof value}: ${value.length||value}

    <!-- new 组件 -->
    <HelloWorld .a="1" ...="{b: 2, c: 3}"></HelloWorld>
    <!-- <div new="Time">${value}</div> -->
    <Tree .tree="[document.head]"></Tree>

    <!-- ??? -->
    <!-- <hello-World></hello-World> -->
    <!-- <div is="hello-world"></div> -->

    <!-- <div .ref="attachShadow(this, Time)">attachShadow</div> -->

    <script>
      var HelloWorld
      var Time
      var Tree

      var value = 'VALUE'
      var text = 'TEXT'
      var bool = true
      var number = 10
      var array = [1, 2, 3]
      var object = {
        a: 0,
        b: 1,
      }

      function attachShadow(node, Component) {
        if (node.shadowRoot) return
        if (!Component) return

        const shadow = node.attachShadow({ mode: 'open' })
        shadow.append(new Component().fragment)
      }
    </script>

    <script type="module">
      import { compile } from './compile.js'
      import { Component, HelloWorld, Time, Tree } from './Component.js'

      window.Component = Component
      window.HelloWorld = HelloWorld
      window.Time = Time
      window.Tree = Tree

      const component = new Component(document.documentElement)
      window.app = component
      app.render()
    </script>

    <style>
      * {
        background: #222;
        color: #fff2;
      }
    </style>
  </body>
</html>
