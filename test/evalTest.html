<script>
  function test(props) {
    var a = 1

    return {
      evalGet(name) {
        return eval(name)
      },
      evalSet(name, value) {
        eval(`${name}=value`)
      },
      evalFunGet(name) {
        return eval(`(function(){return ${name}})`)
      },
      evalFunSet(name) {
        return eval(`(function(value){return ${name}=value})`)
      },
      evalCacheFunGet(name) {
        return (
          this[`get_${name}`] ||
          (this[`get_${name}`] = eval(`(function(){return ${name}})`))
        )
      },
      evalCacheFunSet(name) {
        return (
          this[`set_${name}`] ||
          (this[`set_${name}`] = eval(
            `(function(value){return ${name}=value})`
          ))
        )
      },
      inSet(props) {
        if (a in props) a = props.a
      },
      inGet(props) {
        if (a in props) return a
      },
    }
  }
</script>

<script>
  var n = 100000
  var tester = test()

  console.time('test:.')
  for (let i = 0; i < n; i++) {
    tester.a
  }
  console.timeEnd('test:.')

  console.time('test:.=')
  for (let i = 0; i < n; i++) {
    tester.a = i
  }
  console.timeEnd('test:.=')

  console.time('test:evalGet')
  for (let i = 0; i < n; i++) {
    tester.evalGet('a')
  }
  console.timeEnd('test:evalGet')

  console.time('test:evalSet')
  for (let i = 0; i < n; i++) {
    tester.evalSet('a', i)
  }
  console.timeEnd('test:evalSet')

  console.time('test:evalFunGet')
  for (let i = 0; i < n; i++) {
    tester.evalFunGet('a')
  }
  console.timeEnd('test:evalFunGet')

  console.time('test:evalFunSet')
  for (let i = 0; i < n; i++) {
    tester.evalFunSet('a')(i)
  }
  console.timeEnd('test:evalFunSet')

  console.time('test:evalCacheFunGet')
  for (let i = 0; i < n; i++) {
    tester.evalCacheFunGet('a')
  }
  console.timeEnd('test:evalCacheFunGet')

  console.time('test:evalCacheFunSet')
  for (let i = 0; i < n; i++) {
    tester.evalCacheFunSet('a')(i)
  }
  console.timeEnd('test:evalCacheFunSet')

  console.time('test:inSet')
  for (let i = 0; i < n; i++) {
    tester.inSet({ a: i })
  }
  console.timeEnd('test:inSet')

  console.time('test:inGet')
  for (let i = 0; i < n; i++) {
    tester.inGet({ a: i })
  }
  console.timeEnd('test:inGet')
</script>
