<div id="container"></div>

现在的浏览器中，直接 append 并不比先集中放 fragment 中再一起 append 慢
除非立即触发计算，比如获取 clientHeight 等，但是在 fragment 也不能获取
所以现在浏览器中没必要使用 fragment

<script>
  const count = 1000
  const container = document.getElementById('container')
  const fragment = document.createDocumentFragment()
  console.time()
  for (let i = 0; i < count; i++) {
    const el = document.createElement('div')
    el.setAttribute('x', i)
    el.innerHTML = i
    container.appendChild(el)
    // fragment.appendChild(el)
    // el.clientHeight
  }
  container.appendChild(fragment)
  console.timeEnd()

  setTimeout(() => {
    console.time('setTimeout')
    const fragment = document.createElement('x')
    const divList = document.querySelectorAll('[x]')
    ;[...divList]
      .filter((e, i) => i > 500)
      .reverse()
      .forEach((div) => fragment.appendChild(div))
    container.appendChild(fragment)
    console.timeEnd('setTimeout')
  }, 2000)
</script>
