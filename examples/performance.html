<script src="../src/Component.js"></script>

<template name="Com">
  <span .title="title"> {title} </span>
  <script>
    var title = 'value2'
  </script>
</template>

<main>
  <h1>Performance Test</h1>
  <h2>{timeI}</h2>
  <h2>{timeCostTotal}</h2>

  <input oninput="list.length=this.value" .value="list.length" autofocus />

  <dl>
    <div>
      <dt>list.length</dt>
      <dd>{list.length}</dd>
    </div>
    <div>
      <dt>timeCost</dt>
      <dd>{timeCost}ms</dd>
    </div>
  </dl>

  <section>
    <span for="var item of list" is="Com" .title="item"> {item} </span>
  </section>

  <script>
    var time = 0
    var list = [1, 2, 3, 4, 5]
    list.length = 100 //00
    var timeCost = 0
    var timeCostTotal = 0
    var timeI = 0

    setInterval(() => {
      // list.length = Math.random().toString().slice(-4)
      list
        .fill(1)
        .forEach((e, i) => (list[i] = Math.random().toString().slice(-1)))

      var startDate = new Date()
      this.render()
      var endDate = new Date()
      var _timeCost = endDate - startDate
      timeCostTotal += _timeCost
      timeI += 1
      timeCost = timeCostTotal / timeI
    }, 1000)

    setInterval(() => {
      time = Date.now()
    }, 0)
  </script>
</main>
