<main>
  <h1>Performance Test</h1>

  <dl>
    <div>
      <dt>list.length</dt>
      <dd>
        <input
          type="range"
          .max="max"
          .value="list.length"
          oninput="list.length=this.value"
        />
        ${list.length}
      </dd>
    </div>
    <div>
      <dt>isRandom</dt>
      <dd>
        <input
          type="checkbox"
          .checked="isRandom"
          onchange="isRandom=this.checked"
        />
      </dd>
    </div>
  </dl>

  ${+date}
  <section>
    <span for="const item of list"> ${item?.value} </span>
  </section>
</main>

<script>
  let bool = false
  const list = []
  let isRandom = false
  let max = 10000
  let date = new Date()
  list.length = 100 //0

  function run() {
    bool = !bool
    date = new Date()

    bool ? console.time('render') : console.timeEnd('render')

    for (let i = 0; i < list.length; i++) {
      list[i] = list[i] || { id: i, value: i }
      if (isRandom) {
        list[i].value = Math.random()
      }
    }

    requestAnimationFrame(run)
  }

  run()
</script>
